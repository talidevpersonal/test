import React, { useState } from "react";
import { Box, Typography, Button } from "@mui/material";
import { LocalizationProvider, DatePicker } from "@mui/x-date-pickers";
import { AdapterDayjs } from "@mui/x-date-pickers/AdapterDayjs";
import dayjs from "dayjs";

const CalendarWithDatePicker = () => {
  const [selectedDate, setSelectedDate] = useState(dayjs());
  const [isDatePickerOpen, setDatePickerOpen] = useState(false);

  const handleDateChange = (newDate) => {
    setSelectedDate(newDate);
    setDatePickerOpen(false); // Close the date picker after selection
  };

  return (
    <LocalizationProvider dateAdapter={AdapterDayjs}>
      <Box p={2} maxWidth={400} mx="auto">
        {/* Date Label */}
        <Box
          display="flex"
          justifyContent="center"
          alignItems="center"
          mb={3}
          onClick={() => setDatePickerOpen(true)} // Open date picker on click
          sx={{ cursor: "pointer", border: "1px solid", borderColor: "grey.300", borderRadius: 2, padding: 2 }}
        >
          <Typography variant="h6">{selectedDate.format("MMMM D, YYYY")}</Typography>
        </Box>

        {/* Date Picker */}
        {isDatePickerOpen && (
          <DatePicker
            open
            value={selectedDate}
            onChange={handleDateChange}
            onClose={() => setDatePickerOpen(false)} // Close on clicking outside
            renderInput={() => null} // Hides the default input field
          />
        )}

        {/* Content Below */}
        <Box>
          <Typography variant="body1">Selected Date: {selectedDate.format("MMMM D, YYYY")}</Typography>
        </Box>
      </Box>
    </LocalizationProvider>
  );
};

export default CalendarWithDatePicker;
